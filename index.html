<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Adivina QuiÃ©n â€” Friends</title>

<style>
Â  body {
Â  Â  font-family: 'Segoe UI', Arial, sans-serif;
Â  Â  background: #FFFFFF; /* Fondo Blanco */
Â  Â  color: #000000; /* Texto Negro */
Â  Â  padding: 20px;
Â  Â  display: flex;
Â  Â  justify-content: center;
Â  Â  align-items: flex-start;
Â  Â  min-height: 100vh;
Â  }

Â  .container {
Â  Â  background: #FFFFFF;
Â  Â  width: 800px;
Â  Â  border-radius: 15px;
Â  Â  box-shadow: 0 8px 30px rgba(0,0,0,0.3); /* Sombra mÃ¡s fuerte para contraste */
Â  Â  padding: 25px 35px;
Â  Â  animation: fadeIn 0.8s ease-in-out;
Â  }

Â  @keyframes fadeIn {
Â  Â  from { opacity: 0; transform: translateY(20px); }
Â  Â  to { opacity: 1; transform: translateY(0); }
Â  }

Â  /* Estilo para simular el logo de Friends */
  .titulo-friends { text-align: center; margin-bottom: 25px; }
  .titulo-friends span { font-size: 40px; font-weight: 900; letter-spacing: 2px; }
  /* Bloques de color del logo */
  .titulo-friends .block-rojo { background-color: #E91E23; color: #FFFFFF; padding: 0 5px; border-radius: 5px; }
  .titulo-friends .block-amarillo { background-color: #FABD17; color: #000000; padding: 0 5px; border-radius: 5px; }
  .titulo-friends .block-azul { background-color: #06AFEA; color: #FFFFFF; padding: 0 5px; border-radius: 5px; }

Â  p {
Â  Â  text-align: center;
Â  Â  margin-bottom: 20px;
Â  Â  color: #000000;
Â  }

Â  #botones {
Â  Â  text-align: center;
Â  Â  margin-bottom: 20px;
Â  }

Â  button {
Â  Â  margin: 6px;
Â  Â  padding: 10px 20px;
Â  Â  border: none;
Â  Â  border-radius: 8px;
Â  Â  background: #06AFEA; /* Azul principal */
Â  Â  color: white;
Â  Â  font-weight: bold;
Â  Â  cursor: pointer;
Â  Â  transition: all 0.2s ease;
Â  }

Â  button:hover {
Â  Â  background: #0492cb;
Â  Â  transform: scale(1.05);
Â  }

Â  #btnReset {
Â  Â  background: #E91E23; /* Rojo */
Â  }
Â  #btnReset:hover {
Â  Â  background: #cc1c20;
Â  }
  
  /* VisualizaciÃ³n de imÃ¡genes */
  #candidatos-imagenes { 
    display: flex; 
    justify-content: center; 
    flex-wrap: wrap; 
    gap: 20px; 
    margin: 25px 0; 
    border-bottom: 1px dashed #ccc;
    padding-bottom: 20px;
  }
  .personaje-contenedor { 
    text-align: center; 
    opacity: 1; 
    transition: opacity 0.5s, transform 0.5s; 
  }
  .personaje-contenedor.descartado { 
    opacity: 0.25; 
    transform: scale(0.95); 
    filter: grayscale(100%);
  }
  .personaje-img { 
    width: 100px; 
    height: 100px; 
    border-radius: 50%; 
    object-fit: cover; 
    border: 4px solid #FABD17; /* Borde Amarillo */
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  .personaje-nombre { display: block; font-size: 14px; margin-top: 5px; font-weight: 600; }

Â  #pregunta {
Â  Â  text-align: center;
Â  Â  font-size: 1.3em;
Â  Â  color: #E91E23; /* Rojo para la pregunta */
Â  Â  margin-bottom: 20px;
Â  Â  font-weight: 700;
Â  Â  min-height: 40px;
Â  Â  border: 2px dashed #ccc;
Â  Â  padding: 10px;
Â  }

Â  #opcionesRespuesta {
Â  Â  display: flex;
Â  Â  justify-content: center;
Â  Â  gap: 30px;
Â  Â  margin-bottom: 20px;
Â  }

Â  /* BotÃ³n SÃ: Amarillo */
Â  #opcionesRespuesta button {
Â  Â  font-size: 1.1em;
Â  Â  padding: 12px 35px;
Â  Â  background: #FABD17; 
Â  Â  color: #000000; 
Â  }

  #opcionesRespuesta #btnSi:hover { background: #e0a915; }

Â  /* BotÃ³n NO: Rojo */
Â  #opcionesRespuesta #btnNo {
Â  Â  background: #E91E23 !important; /* !important asegura prioridad */
Â  Â  color: #FFFFFF !important; 
Â  }

Â  #opcionesRespuesta #btnNo:hover { background: #cc1c20 !important; }

Â  #log {
Â  Â  background: #000000; /* Fondo Negro */
Â  Â  color: #FFFFFF; /* Texto Blanco */
    border: 3px solid #FABD17; /* Borde Amarillo */
Â  Â  border-radius: 10px;
Â  Â  padding: 15px;
Â  Â  font-family: monospace;
Â  Â  max-height: 250px;
Â  Â  overflow-y: auto;
Â  }

Â  #log div {
Â  Â  margin-bottom: 6px;
Â  Â  border-bottom: 1px dotted #333;
Â  Â  padding-bottom: 3px;
Â  }

Â  footer {
Â  Â  text-align: center;
Â  Â  margin-top: 20px;
Â  Â  font-size: 0.9em;
Â  Â  color: #000000;
Â  }
</style>
</head>

<body>
Â  <div class="container">
Â  Â  
    <div class="titulo-friends">
        <span>F<span class="block-rojo">R</span>I<span class="block-amarillo">E</span>N<span class="block-azul">D</span>S</span>
        <p style="font-size: 14px; margin-top: 5px;">Adivina QuiÃ©n (Simulador)</p>
    </div>
    
Â  Â  <p>Piensa en un personaje de <b>Friends</b>. El sistema te harÃ¡ preguntas hasta adivinarlo.<br>
Â  Â  Si no lo conoce, lo aprenderÃ¡ automÃ¡ticamente para la prÃ³xima vez. ğŸ§ </p>

Â  Â  <div id="botones">
Â  Â  Â  <button id="btnIniciar">Iniciar juego</button>
Â  Â  Â  <button id="btnPreguntar" disabled>Hacer pregunta</button>
Â  Â  Â  <button id="btnAprender">Agregar personaje nuevo</button>
Â  Â  Â  <button id="btnReset">ğŸ”„ Reiniciar aprendizaje</button>
Â  Â  </div>

    <div id="candidatos-imagenes">
        </div>

Â  Â  <div id="pregunta"></div>

Â  Â  <div id="opcionesRespuesta" style="display:none;">
Â  Â  Â  <button id="btnSi">âœ… SÃ­</button>
Â  Â  Â  <button id="btnNo">âŒ No</button>
Â  Â  </div>

Â  Â  <h3>ğŸ§¾ Registro del sistema:</h3>
Â  Â  <div id="log"></div>

Â  Â  <footer>Â© 2025 â€” Proyecto de Sistemas Expertos | Yara Campos</footer>
Â  </div>

Â  Â  <script>
    // Variable global para todos los personajes (base + aprendidos)
    let todosLosPersonajes = []; 

    // FunciÃ³n que renderiza y actualiza la visualizaciÃ³n de las imÃ¡genes
    function renderizarImagenes(candidatosActuales) {
        const contenedor = document.getElementById("candidatos-imagenes");
        contenedor.innerHTML = '';
        
        const nombresCandidatos = new Set(candidatosActuales.map(c => c.nombre));

        todosLosPersonajes.forEach(p => {
            const div = document.createElement('div');
            div.className = 'personaje-contenedor';
            
            // Si el personaje no estÃ¡ en la lista de candidatos, se atenÃºa
            if (!nombresCandidatos.has(p.nombre)) {
                div.classList.add('descartado');
            }

            div.innerHTML = `
                <img src="${p.imagen}" class="personaje-img" alt="${p.nombre}" title="${p.nombre}">
                <span class="personaje-nombre">${p.nombre}</span>
            `;
            contenedor.appendChild(div);
        });
    }

Â  Â  // Base de conocimiento inicial con las rutas de las imÃ¡genes
Â  Â  function personajesBase() {
Â  Â  Â  return [
Â  Â  Â  Â  { nombre: "Rachel", gÃ©nero: "femenino", cabello: "castaÃ±o", profesiÃ³n: "moda", personalidad: "romÃ¡ntica", imagen: "rachel.jpg" },
Â  Â  Â  Â  { nombre: "Monica", gÃ©nero: "femenino", cabello: "negro", profesiÃ³n: "chef", personalidad: "competitiva", imagen: "monica.jpg" },
Â  Â  Â  Â  { nombre: "Phoebe", gÃ©nero: "femenino", cabello: "rubio", profesiÃ³n: "mÃºsica", personalidad: "soÃ±adora", imagen: "phoebe.jpg" },
Â  Â  Â  Â  { nombre: "Ross", gÃ©nero: "masculino", cabello: "negro", profesiÃ³n: "paleontÃ³logo", personalidad: "serio", imagen: "ross.jpg" },
Â  Â  Â  Â  { nombre: "Joey", gÃ©nero: "masculino", cabello: "castaÃ±o", profesiÃ³n: "actor", personalidad: "divertido", imagen: "joey.jpg" },
Â  Â  Â  Â  { nombre: "Chandler", gÃ©nero: "masculino", cabello: "castaÃ±o", profesiÃ³n: "oficina", personalidad: "sarcÃ¡stico", imagen: "chandler.jpg" }
Â  Â  Â  ];
Â  Â  }

Â  Â  function cargarPersonajes() {
Â  Â  Â  const guardados = localStorage.getItem("personajes_friends");
Â  Â  Â  if (guardados) return JSON.parse(guardados);
Â  Â  Â  return personajesBase();
Â  Â  }

Â  Â  todosLosPersonajes = cargarPersonajes(); // Carga todos los personajes (base + aprendidos)
Â  Â  
Â  Â  let reglas = [
Â  Â  Â  { atributo: "gÃ©nero", pregunta: v => `Â¿Tu personaje es ${v}?` },
Â  Â  Â  { atributo: "cabello", pregunta: v => `Â¿Tu personaje tiene el cabello ${v}?` },
Â  Â  Â  { atributo: "profesiÃ³n", pregunta: v => `Â¿Tu personaje trabaja en ${v}?` },
Â  Â  Â  { atributo: "personalidad", pregunta: v => `Â¿Tu personaje es ${v}?` }
Â  Â  ];

Â  Â  class MotorInferencia {
Â  Â  Â  constructor(personajes, reglas) {
Â  Â  Â  Â  this.personajes = [...personajes];
Â  Â  Â  Â  this.reglas = reglas;
Â  Â  Â  Â  this.hechos = {};
Â  Â  Â  Â  this.log = [];
Â  Â  Â  Â  this.personajeAdivinado = null;
Â  Â  Â  }

Â  Â  Â  registrar(texto) {
Â  Â  Â  Â  this.log.unshift(texto);
Â  Â  Â  Â  document.getElementById("log").innerHTML = this.log.map(l => `<div>${l}</div>`).join("");
Â  Â  Â  }

Â  Â  Â  seleccionarRegla() {
Â  Â  Â  Â  const noAplicadas = this.reglas.filter(r => !(r.atributo in this.hechos));
Â  Â  Â  Â  return noAplicadas.length ? noAplicadas[Math.floor(Math.random() * noAplicadas.length)] : null;
Â  Â  Â  }

Â  Â  Â  hacerPregunta() {
Â  Â  Â  Â  const preguntaDiv = document.getElementById("pregunta");
Â  Â  Â  Â  const opcionesDiv = document.getElementById("opcionesRespuesta");
Â  Â  Â  Â  opcionesDiv.style.display = "none";

Â  Â  Â  Â  if (this.personajes.length === 1) {
Â  Â  Â  Â  Â  const adivina = this.personajes[0].nombre;
Â  Â  Â  Â  Â  this.personajeAdivinado = adivina;
Â  Â  Â  Â  Â  preguntaDiv.textContent = `ğŸ¤” Â¡Creo que es ${adivina}! Â¿Es correcto?`;
Â  Â  Â  Â  Â  opcionesDiv.style.display = "flex";
Â  Â  Â  Â  Â  this.registrar(`Posible personaje: ${adivina}`);
          renderizarImagenes(this.personajes); // Marca al final como Ãºnico candidato
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  if (this.personajes.length === 0) {
Â  Â  Â  Â  Â  this.registrar("âŒ No encontrÃ© coincidencias. AprenderÃ© un nuevo personaje...");
Â  Â  Â  Â  Â  this.aprenderNuevo();
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  const regla = this.seleccionarRegla();
Â  Â  Â  Â  if (!regla) {
Â  Â  Â  Â  Â  this.registrar("No hay mÃ¡s preguntas posibles.");
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  const valores = [...new Set(this.personajes.map(p => p[regla.atributo]))];
Â  Â  Â  Â  const valor = valores[Math.floor(Math.random() * valores.length)];
Â  Â  Â  Â  const pregunta = regla.pregunta(valor);
Â  Â  Â  Â  
        const btnPreguntar = document.getElementById("btnPreguntar");
        btnPreguntar.disabled = true; // Deshabilita el botÃ³n mientras se responde
        
        const respuesta = confirm(pregunta + " (Aceptar = SÃ­, Cancelar = No)");
        
        btnPreguntar.disabled = false; // Habilita de nuevo

Â  Â  Â  Â  if (respuesta) {
Â  Â  Â  Â  Â  this.personajes = this.personajes.filter(p => p[regla.atributo] === valor);
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  this.personajes = this.personajes.filter(p => p[regla.atributo] !== valor);
Â  Â  Â  Â  }

        renderizarImagenes(this.personajes); // Actualiza el estado visual de las imÃ¡genes
Â  Â  Â  Â  this.hacerPregunta();
Â  Â  Â  }

Â  Â  Â  aprenderNuevo() {
Â  Â  Â  Â  this.registrar("ğŸ§  Modo aprendizaje activado.");
Â  Â  Â  Â  const nombre = prompt("Â¿CuÃ¡l era el personaje que pensabas?");
Â  Â  Â  Â  if (!nombre) return;

Â  Â  Â  Â  let nuevo = { nombre: nombre.trim() };
Â  Â  Â  Â  this.registrar(`Aprendiendo personaje: ${nuevo.nombre}`);
        
        // Pide la imagen
        let imagen = prompt(`Ingresa el nombre del archivo de imagen (ej: 'monica.jpg') para ${nuevo.nombre}?`);
        nuevo['imagen'] = imagen ? imagen.toLowerCase().trim() : "default.jpg";


Â  Â  Â  Â  this.reglas.forEach(r => {
Â  Â  Â  Â  Â  let valor = prompt(`Â¿CuÃ¡l es el valor de '${r.atributo}' para ${nuevo.nombre}?`);
Â  Â  Â  Â  Â  nuevo[r.atributo] = valor ? valor.toLowerCase().trim() : "";
Â  Â  Â  Â  });

Â  Â  Â  Â  todosLosPersonajes.push(nuevo); // AÃ±ade al listado global
Â  Â  Â  Â  localStorage.setItem("personajes_friends", JSON.stringify(todosLosPersonajes));
Â  Â  Â  Â  
Â  Â  Â  Â  this.registrar(`âœ… Personaje aprendido: ${nuevo.nombre}`);
Â  Â  Â  Â  alert(`He aprendido un nuevo personaje: ${nuevo.nombre}!`);
        location.reload(); // Recarga para que el nuevo personaje aparezca visualmente
Â  Â  Â  }
Â  Â  }

Â  Â  // Inicializa la visualizaciÃ³n de todos los personajes al cargar la pÃ¡gina
    renderizarImagenes(todosLosPersonajes); 
    
Â  Â  let motor = new MotorInferencia(todosLosPersonajes, reglas);

Â  Â  document.getElementById("btnIniciar").onclick = () => {
Â  Â  Â  motor = new MotorInferencia(todosLosPersonajes, reglas);
Â  Â  Â  motor.registrar("ğŸ® Juego iniciado.");
Â  Â  Â  document.getElementById("btnPreguntar").disabled = false;
Â  Â  Â  document.getElementById("pregunta").textContent = "Â¡Piensa en tu personaje y haz clic en 'Hacer pregunta'!";
      renderizarImagenes(motor.personajes);
Â  Â  };

Â  Â  document.getElementById("btnPreguntar").onclick = () => motor.hacerPregunta();
Â  Â  document.getElementById("btnAprender").onclick = () => motor.aprenderNuevo();

Â  Â  document.getElementById("btnSi").onclick = () => {
Â  Â  Â  motor.registrar(`âœ… Confirmado: era ${motor.personajeAdivinado}`);
Â  Â  Â  alert(`Â¡Genial! SabÃ­a que era ${motor.personajeAdivinado} ğŸ˜„`);
Â  Â  Â  document.getElementById("opcionesRespuesta").style.display = "none";
      document.getElementById("btnPreguntar").disabled = true;
Â  Â  };

Â  Â  document.getElementById("btnNo").onclick = () => {
Â  Â  Â  motor.registrar(`âŒ FallÃ©, no era ${motor.personajeAdivinado}. AprenderÃ© quiÃ©n era.`);
Â  Â  Â  document.getElementById("opcionesRespuesta").style.display = "none";
      document.getElementById("btnPreguntar").disabled = true;
Â  Â  Â  motor.aprenderNuevo();
Â  Â  };

Â  Â  // ğŸ”„ Reiniciar conocimiento
Â  Â  document.getElementById("btnReset").onclick = () => {
Â  Â  Â  if (confirm("Â¿Seguro que quieres borrar todo el conocimiento y reiniciar?")) {
Â  Â  Â  Â  localStorage.removeItem("personajes_friends");
Â  Â  Â  Â  alert("âœ… Base de conocimiento reiniciada. Se restauraron los 6 personajes originales.");
Â  Â  Â  Â  location.reload();
Â  Â  Â  }
Â  Â  };
Â  </script>
</body>
</html>