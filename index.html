<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Adivina QuiÃ©n â€” Friends (VersiÃ³n Visual Mejorada)</title>

<!-- ğŸ’… Estilos generales -->
<style>
  body {
   <!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Adivina QuiÃ©n â€” Friends (VersiÃ³n Visual Mejorada)</title>

<style>
Â  body {
Â  Â  font-family: 'Segoe UI', Arial, sans-serif; /* Fuente estÃ¡ndar */
Â  Â  background: #FFFFFF; /* Fondo Blanco */
Â  Â  color: #000000; /* Texto Negro */
Â  Â  padding: 20px;
Â  Â  display: flex;
Â  Â  justify-content: center;
Â  Â  align-items: flex-start;
Â  Â  min-height: 100vh;
Â  }

Â  .container {
Â  Â  background: #FFFFFF;
Â  Â  width: 800px; /* Aumentado para las imÃ¡genes */
Â  Â  border-radius: 15px;
Â  Â  box-shadow: 0 4px 25px rgba(0,0,0,0.2); /* Sombra mÃ¡s fuerte */
Â  Â  padding: 25px 35px;
Â  Â  animation: fadeIn 0.8s ease-in-out;
Â  }

Â  @keyframes fadeIn {
Â  Â  from { opacity: 0; transform: translateY(20px); }
Â  Â  to { opacity: 1; transform: translateY(0); }
Â  }

Â  /* Estilo para simular el logo de Friends */
  .titulo-friends { text-align: center; margin-bottom: 25px; }
  .titulo-friends span { font-size: 40px; font-weight: 900; letter-spacing: 2px; }
  .titulo-friends .block-rojo { background-color: #E91E23; color: #FFFFFF; padding: 0 5px; border-radius: 5px; }
  .titulo-friends .block-amarillo { background-color: #FABD17; color: #000000; padding: 0 5px; border-radius: 5px; }
  .titulo-friends .block-azul { background-color: #06AFEA; color: #FFFFFF; padding: 0 5px; border-radius: 5px; }

Â  p {
Â  Â  text-align: center;
Â  Â  margin-bottom: 20px;
Â  Â  color: #000000;
Â  }

Â  #botones {
Â  Â  text-align: center;
Â  Â  margin-bottom: 20px;
Â  }

Â  button {
Â  Â  margin: 6px;
Â  Â  padding: 10px 20px;
Â  Â  border: none;
Â  Â  border-radius: 8px;
Â  Â  background: #06AFEA; /* Azul principal */
Â  Â  color: white;
Â  Â  font-weight: bold;
Â  Â  cursor: pointer;
Â  Â  transition: all 0.2s ease;
Â  }

Â  button:hover {
Â  Â  background: #0492cb; /* Azul ligeramente mÃ¡s oscuro */
Â  Â  transform: scale(1.05);
Â  }

Â  #btnReset {
Â  Â  background: #E91E23; /* Rojo */
Â  }
Â  #btnReset:hover {
Â  Â  background: #cc1c20;
Â  }
  
  /* Contenedor de imÃ¡genes de los candidatos */
  #candidatos-imagenes { 
    display: flex; 
    justify-content: center; 
    flex-wrap: wrap; 
    gap: 20px; 
    margin: 25px 0; 
    border-bottom: 1px dashed #ccc;
    padding-bottom: 20px;
  }
  .personaje-contenedor { 
    text-align: center; 
    opacity: 1; 
    transition: opacity 0.5s, transform 0.5s; 
  }
  .personaje-contenedor.descartado { 
    opacity: 0.25; 
    transform: scale(0.95); 
    filter: grayscale(100%);
  }
  .personaje-img { 
    width: 100px; 
    height: 100px; 
    border-radius: 50%; 
    object-fit: cover; 
    border: 4px solid #FABD17; /* Borde Amarillo */
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  .personaje-nombre { display: block; font-size: 14px; margin-top: 5px; font-weight: 600; }

Â  #pregunta {
Â  Â  text-align: center;
Â  Â  font-size: 1.3em;
Â  Â  color: #E91E23; /* Rojo para la pregunta */
Â  Â  margin-bottom: 20px;
Â  Â  font-weight: 700;
Â  Â  min-height: 40px;
Â  Â  border: 2px dashed #ccc;
Â  Â  padding: 10px;
Â  }

Â  #opcionesRespuesta {
Â  Â  display: flex;
Â  Â  justify-content: center;
Â  Â  gap: 30px;
Â  Â  margin-bottom: 20px;
Â  }

Â  #opcionesRespuesta button {
Â  Â  font-size: 1.1em;
Â  Â  padding: 12px 35px;
Â  Â  background: #FABD17; /* BotÃ³n SÃ: Amarillo */
Â  Â  color: #000000; /* Texto Negro en botÃ³n Amarillo */
Â  }

  #opcionesRespuesta #btnSi:hover { background: #e0a915; }

Â  #opcionesRespuesta #btnNo {
Â  Â  background: #E91E23 !important; /* BotÃ³n NO: Rojo */
Â  Â  color: #FFFFFF !important; /* Texto Blanco en botÃ³n Rojo */
Â  }

Â  #opcionesRespuesta #btnNo:hover { background: #cc1c20 !important; }

Â  #log {
Â  Â  background: #000000; /* Fondo Negro */
Â  Â  color: #FFFFFF; /* Texto Blanco */
    border: 3px solid #FABD17; /* Borde Amarillo */
Â  Â  border-radius: 10px;
Â  Â  padding: 15px;
Â  Â  font-family: monospace;
Â  Â  max-height: 250px;
Â  Â  overflow-y: auto;
Â  }

Â  #log div {
Â  Â  margin-bottom: 6px;
Â  Â  border-bottom: 1px dotted #333;
Â  Â  padding-bottom: 3px;
Â  }

Â  footer {
Â  Â  text-align: center;
Â  Â  margin-top: 20px;
Â  Â  font-size: 0.9em;
Â  Â  color: #000000;
Â  }
</style>
</head>

<body>
Â  <div class="container">
Â  Â  
    <div class="titulo-friends">
        <span>F<span class="block-rojo">R</span>I<span class="block-amarillo">E</span>N<span class="block-azul">D</span>S</span>
        <p style="font-size: 14px; margin-top: 5px;">Adivina QuiÃ©n (Simulador)</p>
    </div>
    
Â  Â  <p>Piensa en un personaje de <b>Friends</b>. El sistema te harÃ¡ preguntas hasta adivinarlo.<br>
Â  Â  Si no lo conoce, lo aprenderÃ¡ automÃ¡ticamente para la prÃ³xima vez. ğŸ§ </p>

Â  Â  <div id="botones">
Â  Â  Â  <button id="btnIniciar">Iniciar juego</button>
Â  Â  Â  <button id="btnPreguntar" disabled>Hacer pregunta</button>
Â  Â  Â  <button id="btnAprender">Agregar personaje nuevo</button>
Â  Â  Â  <button id="btnReset">ğŸ”„ Reiniciar aprendizaje</button>
Â  Â  </div>

    <div id="candidatos-imagenes">
        </div>

Â  Â  <div id="pregunta"></div>

Â  Â  <div id="opcionesRespuesta" style="display:none;">
Â  Â  Â  <button id="btnSi">âœ… SÃ­</button>
Â  Â  Â  <button id="btnNo">âŒ No</button>
Â  Â  </div>

Â  Â  <h3>ğŸ§¾ Registro del sistema:</h3>
Â  Â  <div id="log"></div>

Â  Â  <footer>Â© 2025 â€” Proyecto de Sistemas Expertos | Yara Campos</footer>
Â  </div>

Â  Â  <script>
    /* NOTA IMPORTANTE: Para que las imÃ¡genes funcionen, debes colocar los archivos (rachel.jpg, 
       monica.jpg, phoebe.jpg, ross.jpg, joey.jpg, chandler.jpg) en la misma carpeta que tu HTML. */

    // FunciÃ³n para renderizar y actualizar las imÃ¡genes de los candidatos
    let todosLosPersonajes = []; // Variable global para todos los personajes, incluidos los aprendidos

    function renderizarImagenes(candidatosActuales) {
        const contenedor = document.getElementById("candidatos-imagenes");
        contenedor.innerHTML = '';
        
        const nombresCandidatos = new Set(candidatosActuales.map(c => c.nombre));

        todosLosPersonajes.forEach(p => {
            const div = document.createElement('div');
            div.className = 'personaje-contenedor';
            
            // Si el personaje no estÃ¡ en la lista de candidatos, se atenÃºa
            if (!nombresCandidatos.has(p.nombre)) {
                div.classList.add('descartado');
            }

            div.innerHTML = `
                <img src="${p.imagen}" class="personaje-img" alt="${p.nombre}" title="${p.nombre}">
                <span class="personaje-nombre">${p.nombre}</span>
            `;
            contenedor.appendChild(div);
        });
    }

Â  Â  function personajesBase() {
Â  Â  Â  return [
Â  Â  Â  Â  { nombre: "Rachel", gÃ©nero: "femenino", cabello: "castaÃ±o", profesiÃ³n: "moda", personalidad: "romÃ¡ntica", imagen: "rachel.jpg" },
Â  Â  Â  Â  { nombre: "Monica", gÃ©nero: "femenino", cabello: "negro", profesiÃ³n: "chef", personalidad: "competitiva", imagen: "monica.jpg" },
Â  Â  Â  Â  { nombre: "Phoebe", gÃ©nero: "femenino", cabello: "rubio", profesiÃ³n: "mÃºsica", personalidad: "soÃ±adora", imagen: "phoebe.jpg" },
Â  Â  Â  Â  { nombre: "Ross", gÃ©nero: "masculino", cabello: "negro", profesiÃ³n: "paleontÃ³logo", personalidad: "serio", imagen: "ross.jpg" },
Â  Â  Â  Â  { nombre: "Joey", gÃ©nero: "masculino", cabello: "castaÃ±o", profesiÃ³n: "actor", personalidad: "divertido", imagen: "joey.jpg" },
Â  Â  Â  Â  { nombre: "Chandler", gÃ©nero: "masculino", cabello: "castaÃ±o", profesiÃ³n: "oficina", personalidad: "sarcÃ¡stico", imagen: "chandler.jpg" }
Â  Â  Â  ];
Â  Â  }

Â  Â  function cargarPersonajes() {
Â  Â  Â  const guardados = localStorage.getItem("personajes_friends");
Â  Â  Â  if (guardados) return JSON.parse(guardados);
Â  Â  Â  return personajesBase();
Â  Â  }

Â  Â  todosLosPersonajes = cargarPersonajes(); // Carga todos los personajes (base + aprendidos)
Â  Â  
Â  Â  let reglas = [
Â  Â  Â  { atributo: "gÃ©nero", pregunta: v => `Â¿Tu personaje es ${v}?` },
Â  Â  Â  { atributo: "cabello", pregunta: v => `Â¿Tu personaje tiene el cabello ${v}?` },
Â  Â  Â  { atributo: "profesiÃ³n", pregunta: v => `Â¿Tu personaje trabaja en ${v}?` },
Â  Â  Â  { atributo: "personalidad", pregunta: v => `Â¿Tu personaje es ${v}?` }
Â  Â  ];

Â  Â  class MotorInferencia {
Â  Â  Â  constructor(personajes, reglas) {
Â  Â  Â  Â  this.personajes = [...personajes];
Â  Â  Â  Â  this.reglas = reglas;
Â  Â  Â  Â  this.hechos = {};
Â  Â  Â  Â  this.log = [];
Â  Â  Â  Â  this.personajeAdivinado = null;
Â  Â  Â  }

Â  Â  Â  registrar(texto) {
Â  Â  Â  Â  this.log.unshift(texto);
Â  Â  Â  Â  document.getElementById("log").innerHTML = this.log.map(l => `<div>${l}</div>`).join("");
Â  Â  Â  }

Â  Â  Â  seleccionarRegla() {
Â  Â  Â  Â  const noAplicadas = this.reglas.filter(r => !(r.atributo in this.hechos));
Â  Â  Â  Â  return noAplicadas.length ? noAplicadas[Math.floor(Math.random() * noAplicadas.length)] : null;
Â  Â  Â  }

Â  Â  Â  hacerPregunta() {
Â  Â  Â  Â  const preguntaDiv = document.getElementById("pregunta");
Â  Â  Â  Â  const opcionesDiv = document.getElementById("opcionesRespuesta");
Â  Â  Â  Â  opcionesDiv.style.display = "none";

Â  Â  Â  Â  if (this.personajes.length === 1) {
Â  Â  Â  Â  Â  const adivina = this.personajes[0].nombre;
Â  Â  Â  Â  Â  this.personajeAdivinado = adivina;
Â  Â  Â  Â  Â  preguntaDiv.textContent = `ğŸ¤” Â¡Creo que es ${adivina}! Â¿Es correcto?`;
Â  Â  Â  Â  Â  opcionesDiv.style.display = "flex";
Â  Â  Â  Â  Â  this.registrar(`Posible personaje: ${adivina}`);
          renderizarImagenes(this.personajes); // Marca al final como Ãºnico candidato
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  if (this.personajes.length === 0) {
Â  Â  Â  Â  Â  this.registrar("âŒ No encontrÃ© coincidencias. AprenderÃ© un nuevo personaje...");
Â  Â  Â  Â  Â  this.aprenderNuevo();
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  const regla = this.seleccionarRegla();
Â  Â  Â  Â  if (!regla) {
Â  Â  Â  Â  Â  this.registrar("No hay mÃ¡s preguntas posibles.");
Â  Â  Â  Â  Â  this.aprenderNuevo();
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  const valores = [...new Set(this.personajes.map(p => p[regla.atributo]))];
Â  Â  Â  Â  const valor = valores[Math.floor(Math.random() * valores.length)];
Â  Â  Â  Â  const pregunta = regla.pregunta(valor);
Â  Â  Â  Â  
        const btnPreguntar = document.getElementById("btnPreguntar");
        btnPreguntar.disabled = true; // Deshabilita el botÃ³n mientras se responde
        
        const respuesta = confirm(pregunta + " (Aceptar = SÃ­, Cancelar = No)");
        
        btnPreguntar.disabled = false; // Habilita de nuevo

Â  Â  Â  Â  if (respuesta) {
Â  Â  Â  Â  Â  this.personajes = this.personajes.filter(p => p[regla.atributo] === valor);
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  this.personajes = this.personajes.filter(p => p[regla.atributo] !== valor);
Â  Â  Â  Â  }

        renderizarImagenes(this.personajes); // <--- Actualiza el estado visual de las imÃ¡genes
Â  Â  Â  Â  this.hacerPregunta();
Â  Â  Â  }

Â  Â  Â  aprenderNuevo() {
Â  Â  Â  Â  this.registrar("ğŸ§  Modo aprendizaje activado.");
Â  Â  Â  Â  const nombre = prompt("Â¿CuÃ¡l era el personaje que pensabas?");
Â  Â  Â  Â  if (!nombre) return;

Â  Â  Â  Â  let nuevo = { nombre: nombre.trim() };
Â  Â  Â  Â  this.registrar(`Aprendiendo personaje: ${nuevo.nombre}`);
        
        // Pide tambiÃ©n la imagen
        let imagen = prompt(`Ingresa el nombre del archivo de imagen (ej: 'monica.jpg') para ${nuevo.nombre}?`);
        nuevo['imagen'] = imagen ? imagen.toLowerCase().trim() : "default.jpg";


Â  Â  Â  Â  this.reglas.forEach(r => {
Â  Â  Â  Â  Â  let valor = prompt(`Â¿CuÃ¡l es el valor de '${r.atributo}' para ${nuevo.nombre}?`);
Â  Â  Â  Â  Â  nuevo[r.atributo] = valor ? valor.toLowerCase().trim() : "";
Â  Â  Â  Â  });

Â  Â  Â  Â  todosLosPersonajes.push(nuevo); // AÃ±ade al listado global
Â  Â  Â  Â  localStorage.setItem("personajes_friends", JSON.stringify(todosLosPersonajes));
Â  Â  Â  Â  
Â  Â  Â  Â  this.registrar(`âœ… Personaje aprendido: ${nuevo.nombre}`);
Â  Â  Â  Â  alert(`He aprendido un nuevo personaje: ${nuevo.nombre}!`);
        location.reload(); // Recarga para asegurar que el nuevo personaje se inicialice bien
Â  Â  Â  }
Â  Â  }

Â  Â  // Inicializa la visualizaciÃ³n de todos los personajes al cargar la pÃ¡gina
    renderizarImagenes(todosLosPersonajes); 
    
Â  Â  let motor = new MotorInferencia(todosLosPersonajes, reglas);

Â  Â  document.getElementById("btnIniciar").onclick = () => {
Â  Â  Â  motor = new MotorInferencia(todosLosPersonajes, reglas);
Â  Â  Â  motor.registrar("ğŸ® Juego iniciado.");
Â  Â  Â  document.getElementById("btnPreguntar").disabled = false;
Â  Â  Â  document.getElementById("pregunta").textContent = "Â¡Piensa en tu personaje y haz clic en 'Hacer pregunta'!";
      renderizarImagenes(motor.personajes);
Â  Â  };

Â  Â  document.getElementById("btnPreguntar").onclick = () => motor.hacerPregunta();
Â  Â  document.getElementById("btnAprender").onclick = () => motor.aprenderNuevo();

Â  Â  document.getElementById("btnSi").onclick = () => {
Â  Â  Â  motor.registrar(`âœ… Confirmado: era ${motor.personajeAdivinado}`);
Â  Â  Â  alert(`Â¡Genial! SabÃ­a que era ${motor.personajeAdivinado} ğŸ˜„`);
Â  Â  Â  document.getElementById("opcionesRespuesta").style.display = "none";
      document.getElementById("btnPreguntar").disabled = true;
Â  Â  };

Â  Â  document.getElementById("btnNo").onclick = () => {
Â  Â  Â  motor.registrar(`âŒ FallÃ©, no era ${motor.personajeAdivinado}. AprenderÃ© quiÃ©n era.`);
Â  Â  Â  document.getElementById("opcionesRespuesta").style.display = "none";
      document.getElementById("btnPreguntar").disabled = true;
Â  Â  Â  motor.aprenderNuevo();
Â  Â  };

Â  Â  // ğŸ”„ Reiniciar conocimiento
Â  Â  document.getElementById("btnReset").onclick = () => {
Â  Â  Â  if (confirm("Â¿Seguro que quieres borrar todo el conocimiento y reiniciar?")) {
Â  Â  Â  Â  localStorage.removeItem("personajes_friends");
Â  Â  Â  Â  alert("âœ… Base de conocimiento reiniciada. Se restauraron los 6 personajes originales.");
Â  Â  Â  Â  location.reload();
Â  Â  Â  }
Â  Â  };
Â  </script>
</body>
</html> font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #f3f4f6, #dbeafe);
    color: #1e293b;
    padding: 20px;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
  }

  .container {
    background: white;
    width: 700px;
    border-radius: 20px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    padding: 25px 35px;
    animation: fadeIn 0.8s ease-in-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  h1 {
    text-align: center;
    color: #2563eb;
    margin-bottom: 10px;
  }

  p {
    text-align: center;
    margin-bottom: 20px;
  }

  #botones {
    text-align: center;
    margin-bottom: 20px;
  }

  button {
    margin: 6px;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    background: #3b82f6;
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  button:hover {
    background: #2563eb;
    transform: scale(1.05);
  }

  #btnReset {
    background: #ef4444;
  }
  #btnReset:hover {
    background: #dc2626;
  }

  #pregunta {
    text-align: center;
    font-size: 1.2em;
    color: #1e40af;
    margin-bottom: 15px;
    font-weight: 600;
    min-height: 40px;
  }

  #opcionesRespuesta {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 20px;
  }

  #opcionesRespuesta button {
    font-size: 1em;
    padding: 10px 30px;
  }

  #log {
    background: #0f172a;
    color: #f3f4f6;
    border-radius: 10px;
    padding: 15px;
    font-family: monospace;
    max-height: 250px;
    overflow-y: auto;
  }

  #log div {
    margin-bottom: 6px;
  }

  footer {
    text-align: center;
    margin-top: 20px;
    font-size: 0.9em;
    color: #475569;
  }
</style>
</head>

<body>
  <div class="container">
    <h1>ğŸ¯ Adivina QuiÃ©n â€” Friends</h1>
    <p>Piensa en un personaje de <b>Friends</b>. El sistema te harÃ¡ preguntas hasta adivinarlo.<br>
    Si no lo conoce, lo aprenderÃ¡ automÃ¡ticamente para la prÃ³xima vez. ğŸ§ </p>

    <div id="botones">
      <button id="btnIniciar">Iniciar juego</button>
      <button id="btnPreguntar" disabled>Hacer pregunta</button>
      <button id="btnAprender">Agregar personaje nuevo</button>
      <button id="btnReset">ğŸ”„ Reiniciar aprendizaje</button>
    </div>

    <div id="pregunta"></div>

    <div id="opcionesRespuesta" style="display:none;">
      <button id="btnSi">âœ… SÃ­</button>
      <button id="btnNo" style="background:#ef4444;">âŒ No</button>
    </div>

    <h3>ğŸ§¾ Registro del sistema:</h3>
    <div id="log"></div>

    <footer>Â© 2025 â€” Proyecto de Sistemas Expertos | Yara Campos</footer>
  </div>

  <!-- ğŸ§  LÃ³gica del sistema experto -->
  <script>
    function personajesBase() {
      return [
        { nombre: "Rachel", gÃ©nero: "femenino", cabello: "castaÃ±o", profesiÃ³n: "moda", personalidad: "romÃ¡ntica" },
        { nombre: "Monica", gÃ©nero: "femenino", cabello: "negro", profesiÃ³n: "chef", personalidad: "competitiva" },
        { nombre: "Phoebe", gÃ©nero: "femenino", cabello: "rubio", profesiÃ³n: "mÃºsica", personalidad: "soÃ±adora" },
        { nombre: "Ross", gÃ©nero: "masculino", cabello: "negro", profesiÃ³n: "paleontÃ³logo", personalidad: "serio" },
        { nombre: "Joey", gÃ©nero: "masculino", cabello: "castaÃ±o", profesiÃ³n: "actor", personalidad: "divertido" },
        { nombre: "Chandler", gÃ©nero: "masculino", cabello: "castaÃ±o", profesiÃ³n: "oficina", personalidad: "sarcÃ¡stico" }
      ];
    }

    function cargarPersonajes() {
      const guardados = localStorage.getItem("personajes_friends");
      if (guardados) return JSON.parse(guardados);
      return personajesBase();
    }

    let personajes = cargarPersonajes();

    let reglas = [
      { atributo: "gÃ©nero", pregunta: v => `Â¿Tu personaje es ${v}?` },
      { atributo: "cabello", pregunta: v => `Â¿Tu personaje tiene el cabello ${v}?` },
      { atributo: "profesiÃ³n", pregunta: v => `Â¿Tu personaje trabaja en ${v}?` },
      { atributo: "personalidad", pregunta: v => `Â¿Tu personaje es ${v}?` }
    ];

    class MotorInferencia {
      constructor(personajes, reglas) {
        this.personajes = [...personajes];
        this.reglas = reglas;
        this.hechos = {};
        this.log = [];
        this.personajeAdivinado = null;
      }

      registrar(texto) {
        this.log.unshift(texto);
        document.getElementById("log").innerHTML = this.log.map(l => `<div>${l}</div>`).join("");
      }

      seleccionarRegla() {
        const noAplicadas = this.reglas.filter(r => !(r.atributo in this.hechos));
        return noAplicadas.length ? noAplicadas[Math.floor(Math.random() * noAplicadas.length)] : null;
      }

      hacerPregunta() {
        const preguntaDiv = document.getElementById("pregunta");
        const opcionesDiv = document.getElementById("opcionesRespuesta");
        opcionesDiv.style.display = "none";

        if (this.personajes.length === 1) {
          const adivina = this.personajes[0].nombre;
          this.personajeAdivinado = adivina;
          preguntaDiv.textContent = `ğŸ¤” Creo que es ${adivina}. Â¿Es correcto?`;
          opcionesDiv.style.display = "flex";
          this.registrar(`Posible personaje: ${adivina}`);
          return;
        }

        if (this.personajes.length === 0) {
          this.registrar("âŒ No encontrÃ© coincidencias. AprenderÃ© un nuevo personaje...");
          this.aprenderNuevo();
          return;
        }

        const regla = this.seleccionarRegla();
        if (!regla) {
          this.registrar("No hay mÃ¡s preguntas posibles.");
          this.aprenderNuevo();
          return;
        }

        const valores = [...new Set(this.personajes.map(p => p[regla.atributo]))];
        const valor = valores[Math.floor(Math.random() * valores.length)];
        const pregunta = regla.pregunta(valor);
        const respuesta = confirm(pregunta + " (Aceptar = SÃ­, Cancelar = No)");

        if (respuesta) {
          this.personajes = this.personajes.filter(p => p[regla.atributo] === valor);
        } else {
          this.personajes = this.personajes.filter(p => p[regla.atributo] !== valor);
        }

        this.hacerPregunta();
      }

      aprenderNuevo() {
        this.registrar("ğŸ§  Modo aprendizaje activado.");
        const nombre = prompt("Â¿CuÃ¡l era el personaje que pensabas?");
        if (!nombre) return;

        let nuevo = { nombre: nombre.trim() };
        this.registrar(`Aprendiendo personaje: ${nuevo.nombre}`);

        this.reglas.forEach(r => {
          let valor = prompt(`Â¿CuÃ¡l es el valor de '${r.atributo}' para ${nuevo.nombre}?`);
          nuevo[r.atributo] = valor ? valor.toLowerCase().trim() : "";
        });

        personajes.push(nuevo);
        localStorage.setItem("personajes_friends", JSON.stringify(personajes));
        this.registrar(`âœ… Personaje aprendido: ${nuevo.nombre}`);
        alert(`He aprendido un nuevo personaje: ${nuevo.nombre}!`);
      }
    }

    let motor = new MotorInferencia(personajes, reglas);

    document.getElementById("btnIniciar").onclick = () => {
      motor = new MotorInferencia(personajes, reglas);
      motor.registrar("ğŸ® Juego iniciado.");
      document.getElementById("btnPreguntar").disabled = false;
      document.getElementById("pregunta").textContent = "";
    };

    document.getElementById("btnPreguntar").onclick = () => motor.hacerPregunta();
    document.getElementById("btnAprender").onclick = () => motor.aprenderNuevo();

    document.getElementById("btnSi").onclick = () => {
      motor.registrar(`âœ… Confirmado: era ${motor.personajeAdivinado}`);
      alert(`Â¡Genial! SabÃ­a que era ${motor.personajeAdivinado} ğŸ˜„`);
      document.getElementById("opcionesRespuesta").style.display = "none";
    };

    document.getElementById("btnNo").onclick = () => {
      motor.registrar(`âŒ FallÃ©, no era ${motor.personajeAdivinado}. AprenderÃ© quiÃ©n era.`);
      document.getElementById("opcionesRespuesta").style.display = "none";
      motor.aprenderNuevo();
    };

    // ğŸ”„ Reiniciar conocimiento
    document.getElementById("btnReset").onclick = () => {
      if (confirm("Â¿Seguro que quieres borrar todo y reiniciar el conocimiento?")) {
        localStorage.removeItem("personajes_friends");
        personajes = personajesBase();
        alert("âœ… Base de conocimiento reiniciada. Se restauraron los 6 personajes originales.");
        location.reload();
      }
    };
  </script>
</body>
</html>
